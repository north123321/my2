<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="../css/base.css" />
        <link rel="stylesheet" type="text/css" href="../font/iconfont.css">
        <link rel="stylesheet" type="text/css" href="../css/zhuce.css" />
        <script src="../js/jquery-3.3.1.js"></script>
        <script src="../js/common.js"></script>
        <script src="../js/zhuce.js"></script>
        
    </head>
    <body>
        <div id="zhuce">
            <div class="container">
                <div class="header">
                    <img src="../img/zhuce1.bmp" alt="" />
                </div>
                <div class="main">
                    <div class="main_l fl">
                    <img src="../img/zhuce2.bmp" alt="" />
                        
                    </div>
                    <div class="main_r fr">
                        <form action="" id="myform">
                            <div class="shang">
                                <span>注册华盛奥莱会员</span>
                                <a href="denglu.html">已有账户，登录</a>
                            </div>
                            <label class="label">注册账号</label>
                            <input id="username" type="text" /><i class="iconfont icon-yonghufill ren"></i><br />
                            <label class="label">输入密码</label>
                            <input id="password" type="password" /><i class="suo1"></i><br />
                            <label class="label">确认密码</label>
                            <input id="password2" type="text" /><i class="suo2"></i><br />
                            <label class="label">验证码</label>
                            <input id="yanzheng" type="text" /><span class="yzm">2018</span><br />
                            <label class="label">短信验证</label>
                            <input id="duanxin" type="text"  /><span class="huoqu">获取验证码</span><br />
                            <button class="btn">注册</button><br />
                            <input type="checkbox" class="duoxuan" /><span class="xieyi">《奥莱购会员协议》</span>
                        </form>
                    </div>
                </div>
                <div class="footer">
                    <img src="../img/zhuce3.bmp" alt="" />
                </div>
            </div>
        </div>
        <script type="text/javascript">
            
            document.querySelector(".btn").onclick = () => {
                var username = document.querySelector("#username").value;
                var password = document.querySelector("#password").value;

                //1.实例化xhr
                var xhr = new XMLHttpRequest();
                // console.log(xhr)
                
                //2.处理服务器返回数据 
                xhr.onreadystatechange = function() {
                    if(xhr.readyState == 4) {
                        alert(xhr.responseText);
                    }
                }
                //3.设置请求参数，建立与服务器连接 get/post 客户端 服务端nodejs
                //利用GET请求 向服务端发送后端url 第三个参数代表同步和异步，一般我们使用异步，同步页面会刷新，异步局部刷新
                xhr.open("post", "zhuce.php", true);
                //用post请求必须加上这一句
                xhr.setRequestHeader('content-type', 'application/x-www-form-urlencoded');
                //4.向服务器发送请求
                xhr.send(`username=${username}&password=${password}`);


                var username = document.getElementById('username').value;
                if(!/^1[3-8]\d{9}$/i.test(username)){
                    alert('手机号输入错误');

                    return false;
                }
                var password = document.getElementById('password').value;
                    
                var password2 = document.getElementById('password2').value;
                if(password2 != password){
                    alert('两次输入密码不一致');
                    return false;
                }
            }
        </script>
    </body>
</html>